{
    "$schema": "../../schemas/rules-schema.json",
    "imports": {
        "khasab": {
            "path": "../khasab.json",
            "referenceId": "id"
        }
    },
    "subscribers": {
        "tracks": {
            "type": "REST",
            "path": "localhost:9000/api/HlaEntities",
            "referenceId": "hlaIdentifier",
            "refreshIntervalMSec": 5000
        }
    },
    "publishers": {
        "imb": {
            "id": 5432,
            "type": "IMB",
            "host": "localhost",
            "port": 4000,
            "federation": "UST",
            "name": "csWeb-rules"
        }
    },
    "rules": [{
        "id": "Speed check",
        "description": "Check the speed of a vehicle in the CBD area.",
        "recurrence": -1,
        "isActive": true,
        "conditions": [{
            "method": "evaluate",
            "property": "speed > 5"
        }, {
            "method": "inside",
            "property": {
                "polyId": "khasab.harbour",
                "static": true
            }
        }],
        "actions": [{
            "method": "sendImbMessage",
            "delayInMSec": 1000,
            "property": {
                "publisher": "imb",
                "topic": "Unmanned",
                "method": "zoomTo",
                "property": {
                    "message": "Vehicle speed limit in the harbour is exceeded",
                    "attach": "$feature"
                }
            }
        }]
    }]
}